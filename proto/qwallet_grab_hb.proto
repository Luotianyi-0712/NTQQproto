syntax = "proto2"; 
//package code generated by Rick  DO NOT EDIT.
package   trpc.qqhb.access;

//code generated by Rick  DO NOT EDIT.
option  java_package="com.tencent.trpcprotocol.qqhb.access.mobile_hb_cgi";
option  java_multiple_files = false; 
//java_outer_classname的命名不要与message、service、enum的命名相同
option  java_outer_classname  = "MobileHbCgiPB"; 
//code generated by Rick  DO NOT EDIT.
option  go_package ="git.woa.com/trpcprotocol/qqhb/access_mobile_hb_cgi";


service MqqHbTrpc{
    // HBPreGrab 红包预拆接口
    rpc HBPreGrab (HBPreGrabReq) returns (HBPreGrabRsp);
    // HBGrab 红包拆红包接口
    rpc HBGrab (HBGrabReq) returns (HBGrabRsp);
}

// TODO 统一内部版本号等参数h_edition、h_model、h_qq_guid
message HBPreGrabReq{
    // 用户请求uin从统一上下文取
    optional string listid = 1 ; // 红包id
    optional AIOType group_type = 2; // 群组类型
    optional string groupid = 3 ; // 群id
    optional GuildID guild = 4; // 频道id信息
    optional Auth auth = 5;
}

message HBPreGrabRsp{
    optional EnvState state = 1; // 红包状态
    optional string pre_grap_token = 2; // 红包预拆token
    optional HBGrabDetail send_object = 3; // 红包总单
}

message HBGrabReq{
    optional string listid = 1 ; // 红包id
    optional AIOType group_type = 2; // 群组类型
    optional string groupid = 3 ; // 群id
    optional GuildID guild = 4; // 频道id信息
    optional string name = 5 ; // 昵称
    optional string later_fill = 6 ; // 点击稍后完善时，置1
    optional OrderChannel channel = 7; // 红包渠道
    optional Msg msg = 8 ; // 判断重入标志
    optional string answer = 9 ; // 口令红包回答
    optional HbFromType hb_from = 10;
    optional string pre_grab_token = 11 ; // 预拆接口的返回token
    optional Auth auth = 12;
    optional PayFlag pay_flag = 13; // 1-微信
    optional string send_uin = 14; // 发送者qq，风控问询用
}

message HBGrabRsp{
    optional EnvState state = 1;
    optional int64 amount = 2; // 金额，单位分？
    optional HBGrabDetail send_object = 3; // 总单信息
    optional bool need_realname = 4; // 是否需要去实名
}

message HBGrabDetail{
    optional string send_uin = 1;
    optional string send_tinyid = 2;
    optional string send_name = 3;
    optional OrderChannel channel = 4;
    optional string bus_type = 5;
    optional string wishing = 6;
    optional string type = 7;
    optional string grab_uin_list = 8;
    optional string listid = 9;
    optional bool is_owner = 10;
    optional bool is_first_grap = 11;
    optional PayType pay_type = 12;
    optional int64 total_amount = 13;
    optional int64 total_num = 14;
    optional int64 recv_amount = 15;
    optional int64 recv_num = 16;
}

message Msg{
    optional string seq = 1;
    optional string id = 2;
    optional string md5 = 3; // answer md5值
}

message GuildID{
    optional string guild_id = 4; // 主频道id
    optional string sub_guild_id = 5; // 子频道id
    optional string tinyid = 6; // 频道用户id
}


message Auth {
    optional string authkey = 1 ; // aio或者小灰条进入必传
    optional string pc_authkey = 2; // pc红包校验参数
    optional string hg_sign = 3;// 仅游戏？
}

// 抢红包状态
enum EnvState{
    NORMAL_RECV      = 0; //正常抢到
    HAVE_RECV        = 1; //已抢到
    ALL_RECV         = 2; //已抢完
    EXPIRE           = 3; //已过期
    NO_AUTH          = 4; //没权限
    BRIEF_FULL       = 5; //简化用户余额超限
    SELF_CANNOT      = 6; //本人不能抢（等额红包）
    NO_CFT_USER      = 7; //非财付通用户抢红包需要同意QQ钱包协议
    UN_GRAP          = 8; //非定向者不能抢
    DATE_OVERDUE     = 9; //红包太久已经过期,不允许进入历史db
    HAVE_RECV_POP   = 10; //红包已抢到,展示红包详情弹窗,当hongbao.xml配置文
    CAN_RECV        = 11; //可以抢，针对游戏红包预抢
    IDIOM_DISMATCH 	= 12; //成语错误，终端根据返回纠正
    IDIOM_REPEAT 	= 13; //成语重复 ，接龙玩法不允许词语重复的场景
    POEM_END 		= 14; //诗词接死了，终端屏蔽红包弹层详情页入口
    RAREWORD_FAIL 	= 15; //生僻字红包，后台再次校验生僻字拼音失败
    HBCAN_OPEN 		= 16; //预拆（可拆）
}

// PayFlag 支付标志
enum PayFlag{
    QQ = 0;
    WX = 1; 
}

enum PayType{
    BALANCE = 0;// 余额
    BANKCARD = 1; // 银行卡
}

// 红包来源
enum HbFromType{
    NA	    = 0;	//钱包原生
    WZRY	= 1;	//王者荣耀红包
    GAME	= 2;	//游戏红包
    H5 	  = 100;	//通用H5红包
}

// 红包类型
enum OrderChannel{
    UNKNOWN = 0;
    PERSONAL  = 1; //个人红包
    MECHANT   = 2; //企业红包
    QIYE	  = 4; // 企业红包(春节、明星)
    NAMELESS  = 5; //匿名红包
    PASSWORD  = 6; //口令红包
    VIP                = 8;            // 会员红包
    NONAME            = 16;           // 匿名红包
    PASSWD            = 32;           // 口令红包
    REDHELPER         = 64;        // 小助手全群发红包(废弃)
    FEED_REWORD      = 128;       // 普通空间打赏红包
    BIGV_REWORD      = 256;       // 大V空间打赏红包(未用)
    FEED_VISTOR      = 512;       // 空间访客红包
    DIRECTION       = 1024;      // 群组定向红包(发到群或者讨论组，只有指定的人
    F2F_QRCODE      = 2048;      // 面对面二维码红包
    LBS             = 4096;      // LBS 红包(17年春节用了一次，后续未用)
    CHAT            = 8192;      // 群句有料
    VIDEO_CHAT     = 16384;    // 视频通话表情红包
    VIDEO_REWORD   = 32768;    // 小视频打赏(废弃)
    PASSWD_VOICE   = 65536;    // 语音口令红包
    PASSWD_SONG   = 131072;   // K歌红包
    EMOTICON      = 262144;   // 互动表情红包
    IDIOM         = 524288;	// 成语接龙红包
    DRAW         = 1000001;	// 画图红包
    KUAKUA       = 1000002;	// 夸夸红包
    RAREWORD     = 1000003;   // 生僻字红包
    BIRTHDAY     = 1000004;   // 生日红包
    FESTIVAL     = 1000005;   // 节日红包--2023拜年红包
    BACK_VIPGIFT = 2000000;	// 后台红包-会员礼物
}

// AIOType 客户端群组类型
enum AIOType{
    UIN = 0; // 单对单
    GROUP = 1; // 群发
    GUILD = 11; // 社群(频道)
}




