syntax = "proto3"; 
//package code generated by Rick  DO NOT EDIT.
package   trpc.ecom.api_gateway;

//code generated by Rick  DO NOT EDIT.
option  java_package="com.tencent.trpcprotocol.ecom.api_gateway.api_gateway";
option  java_multiple_files = false; 
option  java_outer_classname  = "apiGateway"; 
//code generated by Rick  DO NOT EDIT.
option  go_package ="git.code.oa.com/trpcprotocol/ecom/api_gateway";

// 建议使用谷歌protobuf规范 遵循PB语法检查 
// 谷歌protobuf规范地址：https://developers.google.com/protocol-buffers/docs/style
// Proto格式检查（Tencent）包含：Google protobuf规范和数据校验检查 

// 不建议使用 google/protobuf/any.proto 
// any强依赖package type.googleapis.com/_packagename_._messagename_.   
// https://developers.google.com/protocol-buffers/docs/proto3#any 

// tRPC-Go数据校验模块（**移除注释使用**） 
// tsecstr仅允许中英文字母、数字、=、+、/、@、#、_、-传入。注意，字符集不包括空格、|等符号，如有需要，请自定义校验表达式。
// 详参见规则手册：https://iwiki.woa.com/pages/viewpage.action?pageId=241919333  
  import "trpc/common/validate.proto";  


message ForwardReq { 
    string service = 1 [(validate.rules).string.pattern = "^[0-9a-zA-Z._\\-\\/]+$"]; // 后端service名（北极星名字），用以寻址到具体服务，例如：trpc.tkdtab.authsvr.Authsvr
  	string method = 2 [(validate.rules).string.pattern =  "^[0-9a-zA-Z._\\-\\/]+$"];  // 后端method名 ，用以路由到具体方法实现，例如：/trpc.tkdtab.authsvr.Authsvr/Auth
    bytes body = 3; // 后端服务的业务请求体
    uint32 serialization_type = 4; //0: json; 1: protobuf; 2:noop(原始二进制); 默认为json，如果不清楚【不要】填
    string refer = 5 [(validate.rules).string = {ignore_empty: true}]; // 业务的前端h5页地址
    
    repeated KeyValue exts = 100; // 透传kv对
} 

message KeyValue {
    string key = 1 [(validate.rules).string.tsecstr = false];
    string value = 2 [(validate.rules).string.tsecstr = false];
}
 
message ForwardRsp { 
    int32  retcode = 1; // 后端服务返回错误码
    string retmsg = 2[(validate.rules).string.tsecstr = false]; // 后端服务返回的错误信息 
  	bytes body = 3; // 后端服务的业务回包
  	uint32 compress_type = 4; // body 的压缩类型,类似http的Content-Encoding。0: 无压缩；1: gzip;
} 

service ApiGateway { 
      rpc SsoForward (ForwardReq) returns (ForwardRsp); 
} 
